<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tulsbot ‚Äî Cognitive Core v2.0</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=JetBrains+Mono:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        --bg: #110e0a;
        --bg-2: #1a1410;
        --bg-3: #221c15;
        --amber: #f59e0b;
        --amber-dim: rgba(245, 158, 11, 0.08);
        --amber-border: rgba(245, 158, 11, 0.14);
        --amber-glow: rgba(245, 158, 11, 0.25);
        --orange: #ea580c;
        --ember: #fbbf24;
        --teal: #14b8a6;
        --purple: #a855f7;
        --green: #22c55e;
        --red-orange: #f97316;
        --text-1: #f5e6c8;
        --text-2: #a8956f;
        --text-3: #5c4d38;
        --nav-h: 52px;
        --sidebar-l: 260px;
        --sidebar-r: 280px;
        --font-head: "Bricolage Grotesque", sans-serif;
        --font-mono: "JetBrains Mono", monospace;
        --radius: 6px;
      }

      html,
      body {
        height: 100%;
        overflow: hidden;
        background: var(--bg);
        color: var(--text-1);
        font-family: var(--font-mono);
        font-size: 12px;
      }

      /* ‚îÄ‚îÄ Background ‚îÄ‚îÄ */
      body::before {
        content: "";
        position: fixed;
        inset: 0;
        z-index: 0;
        background-image:
          linear-gradient(rgba(245, 158, 11, 0.025) 1px, transparent 1px),
          linear-gradient(90deg, rgba(245, 158, 11, 0.025) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
      }
      body::after {
        content: "";
        position: fixed;
        inset: 0;
        z-index: 0;
        background: radial-gradient(
          ellipse 80% 60% at 50% 100%,
          rgba(245, 100, 11, 0.07) 0%,
          transparent 70%
        );
        pointer-events: none;
      }

      /* ‚îÄ‚îÄ Ember particles ‚îÄ‚îÄ */
      .embers {
        position: fixed;
        inset: 0;
        z-index: 0;
        pointer-events: none;
        overflow: hidden;
      }
      .ember {
        position: absolute;
        bottom: -10px;
        width: 2px;
        height: 2px;
        border-radius: 50%;
        background: var(--amber);
        opacity: 0;
        animation: floatEmber var(--dur, 8s) var(--delay, 0s) infinite ease-in-out;
        left: var(--x, 50%);
      }
      @keyframes floatEmber {
        0% {
          transform: translateY(0) scale(1);
          opacity: 0;
        }
        10% {
          opacity: 0.6;
        }
        50% {
          transform: translateY(-45vh) scale(0.7) translateX(20px);
          opacity: 0.3;
        }
        90% {
          opacity: 0.05;
        }
        100% {
          transform: translateY(-90vh) scale(0.3) translateX(-10px);
          opacity: 0;
        }
      }

      /* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
      #app {
        position: relative;
        z-index: 1;
        display: grid;
        grid-template-rows: var(--nav-h) 1fr;
        grid-template-columns: var(--sidebar-l) 1fr var(--sidebar-r);
        grid-template-areas: "nav nav nav" "left center right";
        height: 100vh;
      }

      /* ‚îÄ‚îÄ Scrollbar ‚îÄ‚îÄ */
      ::-webkit-scrollbar {
        width: 4px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: var(--amber-border);
        border-radius: 2px;
      }

      /* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
      #nav {
        grid-area: nav;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        background: rgba(17, 14, 10, 0.95);
        border-bottom: 1px solid var(--amber-border);
        backdrop-filter: blur(12px);
        position: relative;
        z-index: 10;
      }
      .nav-logo {
        display: flex;
        align-items: baseline;
        gap: 10px;
      }
      .nav-logo-name {
        font-family: var(--font-head);
        font-size: 20px;
        font-weight: 800;
        color: var(--amber);
        letter-spacing: -0.5px;
        text-shadow: 0 0 20px rgba(245, 158, 11, 0.4);
      }
      .nav-logo-sub {
        font-size: 10px;
        font-weight: 500;
        color: var(--text-2);
        letter-spacing: 1px;
        text-transform: uppercase;
      }
      .nav-session-pill {
        background: var(--amber-dim);
        border: 1px solid var(--amber-border);
        border-radius: 20px;
        padding: 5px 14px;
        font-size: 10.5px;
        color: var(--text-2);
        letter-spacing: 0.3px;
      }
      .nav-session-pill span {
        color: var(--ember);
      }
      .nav-right {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .badge-connected {
        display: flex;
        align-items: center;
        gap: 6px;
        background: rgba(34, 197, 94, 0.08);
        border: 1px solid rgba(34, 197, 94, 0.2);
        border-radius: 20px;
        padding: 4px 12px;
        font-size: 10px;
        color: #22c55e;
      }
      .badge-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #22c55e;
        box-shadow: 0 0 6px #22c55e;
        animation: pulseDot 2s infinite;
      }
      @keyframes pulseDot {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.4;
        }
      }
      .btn-gear {
        background: var(--amber-dim);
        border: 1px solid var(--amber-border);
        border-radius: var(--radius);
        padding: 6px 8px;
        color: var(--text-2);
        cursor: pointer;
        font-size: 13px;
        transition: all 0.2s;
      }
      .btn-gear:hover {
        background: rgba(245, 158, 11, 0.12);
        color: var(--amber);
      }
      .btn-trigger {
        background: var(--orange);
        border: none;
        border-radius: var(--radius);
        padding: 6px 14px;
        color: #fff;
        font-family: var(--font-mono);
        font-size: 10.5px;
        font-weight: 600;
        cursor: pointer;
        letter-spacing: 0.3px;
        transition: all 0.2s;
        box-shadow: 0 0 14px rgba(234, 88, 12, 0.3);
      }
      .btn-trigger:hover {
        background: #c2410c;
        box-shadow: 0 0 20px rgba(234, 88, 12, 0.5);
      }

      /* ‚îÄ‚îÄ LEFT SIDEBAR ‚îÄ‚îÄ */
      #left {
        grid-area: left;
        background: rgba(17, 14, 10, 0.7);
        border-right: 1px solid var(--amber-border);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      .panel-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 14px 16px 12px;
        border-bottom: 1px solid var(--amber-border);
      }
      .panel-title {
        font-family: var(--font-head);
        font-size: 11px;
        font-weight: 700;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        color: var(--text-2);
      }
      .count-badge {
        background: var(--amber);
        color: var(--bg);
        font-size: 9px;
        font-weight: 700;
        padding: 2px 7px;
        border-radius: 10px;
        letter-spacing: 0.5px;
      }
      #agent-list {
        flex: 1;
        overflow-y: auto;
        padding: 8px 0;
      }
      .agent-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 16px;
        cursor: pointer;
        border-left: 2px solid transparent;
        transition: all 0.15s;
      }
      .agent-item:hover {
        background: var(--amber-dim);
        border-left-color: var(--amber-border);
      }
      .agent-item.active-agent {
        background: rgba(245, 158, 11, 0.1);
        border-left-color: var(--amber);
      }
      .agent-item.selected {
        background: rgba(245, 158, 11, 0.15);
        border-left-color: var(--amber);
      }
      .agent-item.dimmed {
        opacity: 0.3;
      }
      .agent-icon {
        font-size: 15px;
        width: 20px;
        text-align: center;
        flex-shrink: 0;
      }
      .agent-info {
        flex: 1;
        min-width: 0;
      }
      .agent-name {
        font-size: 11px;
        font-weight: 500;
        color: var(--text-1);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .agent-meta {
        font-size: 9.5px;
        color: var(--text-3);
        margin-top: 1px;
      }
      .status-dot {
        width: 7px;
        height: 7px;
        border-radius: 50%;
        flex-shrink: 0;
      }
      .status-dot.running {
        background: var(--amber);
        box-shadow: 0 0 8px var(--amber);
        animation: pulseAmber 1.5s infinite;
      }
      .status-dot.active-run {
        background: var(--orange);
        box-shadow: 0 0 8px var(--orange);
        animation: pulseAmber 1s infinite;
      }
      .status-dot.idle {
        background: var(--text-3);
      }
      .status-dot.recent {
        background: #6b7280;
      }
      @keyframes pulseAmber {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.5;
          transform: scale(0.7);
        }
      }
      .sidebar-footer {
        padding: 12px 16px;
        border-top: 1px solid var(--amber-border);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .metric-label {
        font-size: 9.5px;
        color: var(--text-3);
        text-transform: uppercase;
        letter-spacing: 0.8px;
      }
      .metric-value {
        font-size: 18px;
        font-weight: 600;
        color: var(--amber);
        font-family: var(--font-mono);
      }

      /* ‚îÄ‚îÄ CENTER ‚îÄ‚îÄ */
      #center {
        grid-area: center;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background: transparent;
      }
      .center-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 14px 20px 12px;
        border-bottom: 1px solid var(--amber-border);
        background: rgba(17, 14, 10, 0.5);
        backdrop-filter: blur(6px);
      }
      .live-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .live-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--orange);
        box-shadow: 0 0 10px var(--orange);
        animation: blink 1.1s infinite;
      }
      @keyframes blink {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.15;
        }
      }
      .btn-replay {
        background: var(--amber-dim);
        border: 1px solid var(--amber-border);
        border-radius: var(--radius);
        padding: 5px 12px;
        color: var(--amber);
        font-family: var(--font-mono);
        font-size: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        letter-spacing: 0.3px;
      }
      .btn-replay:hover {
        background: rgba(245, 158, 11, 0.15);
      }
      #stream-wrap {
        flex: 1;
        overflow-y: auto;
        padding: 16px 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .stream-card {
        background: var(--amber-dim);
        border: 1px solid var(--amber-border);
        border-left-width: 3px;
        border-radius: var(--radius);
        padding: 12px 14px;
        opacity: 0;
        transform: translateY(12px);
        animation: slideUp 0.4s forwards;
        transition:
          opacity 0.2s,
          transform 0.2s;
      }
      @keyframes slideUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .stream-card.dimmed {
        opacity: 0.15 !important;
      }
      .stream-card.highlighted {
        box-shadow: 0 0 0 1px var(--amber-glow);
      }
      .card-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
      }
      .card-type-tag {
        font-size: 8px;
        font-weight: 700;
        letter-spacing: 1.2px;
        text-transform: uppercase;
        padding: 2px 7px;
        border-radius: 4px;
        opacity: 0.85;
      }
      .card-ts {
        font-size: 9px;
        color: var(--text-3);
        margin-left: auto;
      }
      .card-icon {
        font-size: 12px;
      }
      .card-body {
        font-size: 11px;
        color: var(--text-2);
        line-height: 1.6;
      }
      .card-body .label {
        font-size: 9.5px;
        color: var(--text-3);
        text-transform: uppercase;
        letter-spacing: 0.8px;
        margin-bottom: 4px;
      }
      .card-body .query-text {
        color: var(--text-1);
        font-size: 12px;
        margin-bottom: 8px;
        font-style: italic;
      }
      .pills {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        margin-top: 6px;
      }
      .pill {
        background: rgba(245, 158, 11, 0.15);
        border: 1px solid rgba(245, 158, 11, 0.25);
        border-radius: 12px;
        padding: 2px 9px;
        font-size: 9.5px;
        color: var(--ember);
        font-weight: 500;
      }
      .conf-bar-wrap {
        margin-top: 8px;
      }
      .conf-bar-label {
        display: flex;
        justify-content: space-between;
        font-size: 9.5px;
        color: var(--text-2);
        margin-bottom: 4px;
      }
      .conf-bar-track {
        background: rgba(255, 255, 255, 0.06);
        border-radius: 4px;
        height: 5px;
        overflow: hidden;
      }
      .conf-bar-fill {
        height: 100%;
        border-radius: 4px;
        background: linear-gradient(90deg, var(--amber), var(--ember));
      }
      .routing-arrow {
        font-size: 13px;
        color: var(--orange);
        margin: 0 4px;
      }
      .routing-target {
        color: var(--text-1);
        font-weight: 600;
      }
      .routing-reason {
        font-size: 10px;
        color: var(--text-3);
        margin-top: 5px;
        font-style: italic;
      }
      .mem-snippets {
        margin-top: 8px;
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      .mem-snippet {
        background: rgba(20, 184, 166, 0.06);
        border: 1px solid rgba(20, 184, 166, 0.15);
        border-radius: 4px;
        padding: 5px 8px;
        font-size: 10px;
        color: var(--text-2);
      }
      .mem-snippet .snippet-ns {
        color: var(--teal);
        font-size: 9px;
        font-weight: 600;
        margin-bottom: 2px;
      }
      .kb-file {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 7px;
        background: rgba(168, 85, 247, 0.06);
        border: 1px solid rgba(168, 85, 247, 0.15);
        border-radius: 4px;
        padding: 6px 10px;
      }
      .kb-file-icon {
        font-size: 14px;
      }
      .kb-file-name {
        font-size: 10.5px;
        color: var(--text-1);
        font-weight: 500;
      }
      .kb-file-size {
        font-size: 9px;
        color: var(--text-3);
      }
      .tool-status {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 7px;
      }
      .tool-badge {
        background: rgba(249, 115, 22, 0.12);
        border: 1px solid rgba(249, 115, 22, 0.25);
        border-radius: 4px;
        padding: 3px 9px;
        font-size: 10px;
        color: var(--red-orange);
        font-weight: 600;
      }
      .tool-result {
        font-size: 10px;
        color: var(--text-3);
        font-style: italic;
      }
      .synth-bar-wrap {
        margin-top: 8px;
      }
      .synth-bar-label {
        font-size: 9.5px;
        color: var(--text-2);
        margin-bottom: 4px;
      }
      .synth-bar-track {
        background: rgba(255, 255, 255, 0.06);
        border-radius: 4px;
        height: 6px;
        overflow: hidden;
      }
      .synth-bar-fill {
        height: 100%;
        border-radius: 4px;
        background: linear-gradient(90deg, var(--green), #4ade80);
        width: 0;
        animation: fillBar 1.2s 0.3s forwards ease-out;
      }
      @keyframes fillBar {
        to {
          width: 78%;
        }
      }
      .stream-trigger {
        margin: 4px 20px 16px;
        background: rgba(17, 14, 10, 0.8);
        border: 1px solid var(--amber-border);
        border-radius: var(--radius);
        padding: 12px 14px;
        flex-shrink: 0;
      }
      .trigger-label {
        font-size: 9px;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: var(--text-3);
        margin-bottom: 6px;
      }
      .trigger-query {
        font-size: 11.5px;
        color: var(--text-3);
        font-style: italic;
        line-height: 1.5;
      }
      .trigger-meta {
        display: flex;
        gap: 12px;
        margin-top: 8px;
      }
      .trigger-meta-pill {
        font-size: 9px;
        color: var(--text-3);
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.07);
        border-radius: 10px;
        padding: 2px 8px;
      }

      /* ‚îÄ‚îÄ RIGHT SIDEBAR ‚îÄ‚îÄ */
      #right {
        grid-area: right;
        background: rgba(17, 14, 10, 0.7);
        border-left: 1px solid var(--amber-border);
        display: flex;
        flex-direction: column;
        overflow-y: auto;
      }
      .vitals-section {
        padding: 14px 16px;
        border-bottom: 1px solid rgba(245, 158, 11, 0.07);
      }
      .vitals-section-title {
        font-family: var(--font-head);
        font-size: 9px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        color: var(--text-3);
        margin-bottom: 10px;
      }
      .vital-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 7px;
      }
      .vital-key {
        font-size: 10px;
        color: var(--text-2);
      }
      .vital-val {
        font-size: 10px;
        font-weight: 600;
        color: var(--text-1);
        font-family: var(--font-mono);
      }
      .vital-val.amber {
        color: var(--amber);
      }
      .vital-val.green {
        color: var(--green);
      }
      .vital-val.teal {
        color: var(--teal);
      }
      .vital-val.purple {
        color: var(--purple);
      }
      .sync-badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        background: rgba(34, 197, 94, 0.08);
        border: 1px solid rgba(34, 197, 94, 0.18);
        border-radius: 10px;
        padding: 2px 8px;
        font-size: 9.5px;
        color: var(--green);
      }
      .sync-dot {
        width: 5px;
        height: 5px;
        border-radius: 50%;
        background: var(--green);
        animation: pulseDot 2s infinite;
      }
      .kb-compress-visual {
        margin-top: 8px;
      }
      .kb-compress-row {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 10px;
        color: var(--text-2);
      }
      .kb-bar-before {
        height: 8px;
        width: 100%;
        background: rgba(168, 85, 247, 0.25);
        border-radius: 3px;
        flex-shrink: 0;
        width: 80px;
      }
      .kb-arrow {
        color: var(--text-3);
      }
      .kb-bar-after {
        height: 8px;
        background: var(--purple);
        border-radius: 3px;
        width: 1px;
      }
      .perf-val-big {
        font-size: 22px;
        font-weight: 700;
        color: var(--amber);
        font-family: var(--font-mono);
        line-height: 1;
      }
      .perf-sub {
        font-size: 9px;
        color: var(--text-3);
        margin-top: 2px;
      }
      .perf-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 8px;
      }
      .perf-cell {
        background: var(--amber-dim);
        border: 1px solid var(--amber-border);
        border-radius: var(--radius);
        padding: 8px 10px;
      }
      /* ‚îÄ‚îÄ Sparkline ‚îÄ‚îÄ */
      .sparkline-wrap {
        padding: 14px 16px;
      }
      .sparkline-title {
        font-family: var(--font-head);
        font-size: 9px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        color: var(--text-3);
        margin-bottom: 10px;
      }
      .sparkline {
        display: flex;
        align-items: flex-end;
        gap: 4px;
        height: 40px;
      }
      .spark-bar {
        flex: 1;
        border-radius: 2px 2px 0 0;
        background: linear-gradient(to top, var(--orange), var(--amber));
        opacity: 0.7;
        transition: opacity 0.2s;
      }
      .spark-bar:hover {
        opacity: 1;
      }
      .spark-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 4px;
        font-size: 8px;
        color: var(--text-3);
      }

      /* ‚îÄ‚îÄ Card border colors ‚îÄ‚îÄ */
      .card-intent {
        border-left-color: var(--amber);
      }
      .card-routing {
        border-left-color: var(--orange);
      }
      .card-memory {
        border-left-color: var(--teal);
      }
      .card-knowledge {
        border-left-color: var(--purple);
      }
      .card-tool {
        border-left-color: var(--red-orange);
      }
      .card-synth {
        border-left-color: var(--green);
      }

      .tag-intent {
        background: rgba(245, 158, 11, 0.15);
        color: var(--amber);
      }
      .tag-routing {
        background: rgba(234, 88, 12, 0.15);
        color: var(--orange);
      }
      .tag-memory {
        background: rgba(20, 184, 166, 0.15);
        color: var(--teal);
      }
      .tag-knowledge {
        background: rgba(168, 85, 247, 0.15);
        color: var(--purple);
      }
      .tag-tool {
        background: rgba(249, 115, 22, 0.15);
        color: var(--red-orange);
      }
      .tag-synth {
        background: rgba(34, 197, 94, 0.15);
        color: var(--green);
      }
    </style>
  </head>
  <body>
    <div class="embers" id="embers"></div>
    <div id="app">
      <!-- NAV -->
      <nav id="nav">
        <div class="nav-logo">
          <span class="nav-logo-name">Tulsbot</span>
          <span class="nav-logo-sub">Cognitive Core v2.0</span>
        </div>
        <div class="nav-session-pill">
          Session: <span>ws-8821</span> ¬∑ 4 turns ¬∑ <span>Web Researcher active</span>
        </div>
        <div class="nav-right">
          <div class="badge-connected">
            <span class="badge-dot"></span>
            <span>Connected to: OpenClaw</span>
          </div>
          <button class="btn-gear" title="Settings">‚öô</button>
          <button class="btn-trigger" id="btn-trigger">‚ñ∂ Trigger Test Intent</button>
        </div>
      </nav>

      <!-- LEFT SIDEBAR -->
      <aside id="left">
        <div class="panel-header">
          <span class="panel-title">Sub-Agents</span>
          <span class="count-badge">17</span>
        </div>
        <div id="agent-list"></div>
        <div class="sidebar-footer">
          <div>
            <div class="metric-label">Total Runs Today</div>
            <div class="metric-value">247</div>
          </div>
          <div style="text-align: right">
            <div class="metric-label">Active Now</div>
            <div class="metric-value" style="font-size: 14px; color: var(--orange)">2</div>
          </div>
        </div>
      </aside>

      <!-- CENTER -->
      <main id="center">
        <div class="center-header">
          <div class="live-indicator">
            <span class="live-dot"></span>
            <span class="panel-title">Cognitive Stream</span>
          </div>
          <button class="btn-replay" id="btn-replay">‚Ü∫ Replay</button>
        </div>
        <div id="stream-wrap"></div>
        <div class="stream-trigger">
          <div class="trigger-label">Triggered by ¬∑ Session ws-8821</div>
          <div class="trigger-query">
            "Can you analyze this TypeScript file and explain the delegate pattern it uses, then
            search for similar patterns online?"
          </div>
          <div class="trigger-meta">
            <span class="trigger-meta-pill">Agent: Code Analyst + Web Researcher</span>
            <span class="trigger-meta-pill">Turn 4 / 4</span>
            <span class="trigger-meta-pill">14:32:07 UTC</span>
          </div>
        </div>
      </main>

      <!-- RIGHT SIDEBAR -->
      <aside id="right">
        <div class="panel-header" style="border-bottom: 1px solid var(--amber-border)">
          <span class="panel-title">Brain Vitals</span>
          <span style="font-size: 9px; color: var(--green)">‚óè Live</span>
        </div>

        <div class="vitals-section">
          <div class="vitals-section-title">Memory System</div>
          <div class="vital-row">
            <span class="vital-key">Sync status</span>
            <span class="sync-badge"><span class="sync-dot"></span>Synced</span>
          </div>
          <div class="vital-row">
            <span class="vital-key">Namespaces active</span><span class="vital-val amber">17</span>
          </div>
          <div class="vital-row">
            <span class="vital-key">Cache hit rate</span><span class="vital-val green">95%</span>
          </div>
          <div class="vital-row">
            <span class="vital-key">LRU cache entries</span><span class="vital-val">312</span>
          </div>
          <div class="vital-row">
            <span class="vital-key">Last sync</span
            ><span class="vital-val" style="color: var(--text-3)">14s ago</span>
          </div>
        </div>

        <div class="vitals-section">
          <div class="vitals-section-title">Knowledge Base</div>
          <div class="vital-row">
            <span class="vital-key">Source size</span><span class="vital-val purple">481 KB</span>
          </div>
          <div class="vital-row">
            <span class="vital-key">Indexed size</span><span class="vital-val teal">6.2 KB</span>
          </div>
          <div class="vital-row">
            <span class="vital-key">Compression ratio</span
            ><span class="vital-val green">99.3%</span>
          </div>
          <div class="vital-row">
            <span class="vital-key">Agent files</span><span class="vital-val">17</span>
          </div>
          <div class="vital-row">
            <span class="vital-key">Last refresh</span
            ><span class="vital-val" style="color: var(--text-3)">3 min ago</span>
          </div>
          <div class="kb-compress-visual">
            <div class="kb-compress-row">
              <div class="kb-bar-before"></div>
              <span class="kb-arrow">‚Üí</span>
              <div class="kb-bar-after"></div>
              <span style="font-size: 9px; color: var(--purple); margin-left: 4px"
                >99.3% smaller</span
              >
            </div>
          </div>
        </div>

        <div class="vitals-section">
          <div class="vitals-section-title">Performance</div>
          <div class="perf-grid">
            <div class="perf-cell">
              <div class="perf-val-big">91%</div>
              <div class="perf-sub">Avg intent confidence</div>
            </div>
            <div class="perf-cell">
              <div class="perf-val-big">42ms</div>
              <div class="perf-sub">Avg routing time</div>
            </div>
            <div class="perf-cell">
              <div class="perf-val-big">18</div>
              <div class="perf-sub">Agent handoffs today</div>
            </div>
            <div class="perf-cell">
              <div class="perf-val-big">1.2s</div>
              <div class="perf-sub">p95 response latency</div>
            </div>
          </div>
        </div>

        <div class="sparkline-wrap">
          <div class="sparkline-title">Agent Activity ‚Äî Last 10 Requests</div>
          <div class="sparkline" id="sparkline"></div>
          <div class="spark-labels"><span>-10</span><span>-5</span><span>now</span></div>
        </div>
      </aside>
    </div>

    <script>
      "use strict";

      /* ‚îÄ‚îÄ Ember particles ‚îÄ‚îÄ */
      (function () {
        const wrap = document.getElementById("embers");
        const positions = [
          4, 8, 13, 19, 24, 29, 33, 38, 43, 48, 52, 57, 62, 67, 71, 76, 80, 85, 88, 92, 95, 3, 97,
        ];
        const durations = [
          7, 9, 11, 8, 10, 12, 7.5, 9.5, 11.5, 8.5, 10.5, 13, 6.5, 8, 10, 12.5, 7, 9, 11, 8, 10, 6,
          14,
        ];
        const delays = [
          0, 1.5, 3, 0.5, 2, 4, 1, 3.5, 0.2, 2.5, 4.5, 0.8, 2.2, 3.8, 1.2, 0, 3, 1.7, 4.2, 0.4, 2.8,
          1.1, 3.3,
        ];
        positions.forEach(function (x, i) {
          var el = document.createElement("div");
          el.className = "ember";
          el.style.setProperty("--x", x + "%");
          el.style.setProperty("--dur", durations[i % durations.length] + "s");
          el.style.setProperty("--delay", delays[i % delays.length] + "s");
          wrap.appendChild(el);
        });
      })();

      /* ‚îÄ‚îÄ Agent data ‚îÄ‚îÄ */
      var AGENTS = [
        { icon: "üåê", name: "Web Researcher", status: "running", meta: "active now", tag: "web" },
        {
          icon: "üõ†",
          name: "Tool Executor",
          status: "active-run",
          meta: "running ¬∑ 2s",
          tag: "tool",
        },
        { icon: "üíª", name: "Code Analyst", status: "idle", meta: "last: 1m ago", tag: "code" },
        {
          icon: "üß†",
          name: "Memory Manager",
          status: "recent",
          meta: "last: 2m ago",
          tag: "memory",
        },
        {
          icon: "üìö",
          name: "Knowledge Synthesizer",
          status: "idle",
          meta: "last: 5m ago",
          tag: "knowledge",
        },
        {
          icon: "üîç",
          name: "Semantic Search",
          status: "idle",
          meta: "last: 8m ago",
          tag: "search",
        },
        {
          icon: "üóÇ",
          name: "Workspace Automator",
          status: "idle",
          meta: "last: 12m ago",
          tag: "workspace",
        },
        {
          icon: "üìù",
          name: "Writing Assistant",
          status: "idle",
          meta: "last: 22m ago",
          tag: "writing",
        },
        { icon: "üìä", name: "Data Analyst", status: "idle", meta: "last: 31m ago", tag: "data" },
        {
          icon: "üîó",
          name: "Context Bridger",
          status: "idle",
          meta: "last: 47m ago",
          tag: "context",
        },
      ];

      /* ‚îÄ‚îÄ Stream card definitions ‚îÄ‚îÄ */
      var BASE_CARDS = [
        {
          type: "intent",
          icon: "üéØ",
          ts: "14:32:07.102",
          label: "Intent Analysis",
          agentTag: null,
          build: function (body) {
            var ql = mk("div", "label", "User Query");
            var qt = mk(
              "div",
              "query-text",
              '"Can you analyze this TypeScript file and explain the delegate pattern it uses, then search for similar patterns online?"',
            );
            var kl = mk("div", "label", "Extracted Keywords");
            var pills = mk("div", "pills");
            ["TypeScript", "delegate pattern", "file analysis", "web search", "explain"].forEach(
              function (k) {
                pills.appendChild(mk("span", "pill", k));
              },
            );
            var conf = mkConfBar("Code Analysis", 94);
            body.appendChild(ql);
            body.appendChild(qt);
            body.appendChild(kl);
            body.appendChild(pills);
            body.appendChild(conf);
          },
        },
        {
          type: "routing",
          icon: "‚ö°",
          ts: "14:32:07.189",
          label: "Agent Routing",
          agentTag: "code",
          build: function (body) {
            var row = document.createElement("div");
            row.style.display = "flex";
            row.style.alignItems = "center";
            row.style.flexWrap = "wrap";
            row.style.gap = "4px";
            var lbl = mk("span", null, "Routing to");
            lbl.style.color = "var(--text-2)";
            var arrow = mk("span", null, "‚Üí");
            arrow.style.color = "var(--orange)";
            arrow.style.margin = "0 4px";
            var target = mk("span", "routing-target", "Code Analyst");
            row.appendChild(lbl);
            row.appendChild(arrow);
            row.appendChild(target);
            var reason = mk(
              "div",
              "routing-reason",
              "Primary domain: TypeScript analysis. Confidence 94%. Secondary routing queued: Web Researcher for pattern lookup.",
            );
            body.appendChild(row);
            body.appendChild(reason);
          },
        },
        {
          type: "memory",
          icon: "üíæ",
          ts: "14:32:07.341",
          label: "Memory Lookup",
          agentTag: "memory",
          build: function (body) {
            var found = mk("div", null, "Searching memory‚Ä¶ ");
            found.style.color = "var(--text-2)";
            found.style.fontSize = "11px";
            var foundSpan = mk("span", null, "Found 3 relevant contexts");
            foundSpan.style.color = "var(--teal)";
            foundSpan.style.fontWeight = "600";
            found.appendChild(foundSpan);
            var snippets = mk("div", "mem-snippets");
            [
              {
                ns: "code-analyst",
                text: "User prefers concise explanations with code examples. Familiar with TypeScript generics.",
              },
              {
                ns: "session-ws-8821",
                text: "Prior turn: analyzed auth middleware. Pattern: composition over inheritance.",
              },
              {
                ns: "global",
                text: "User coding level: advanced. Preferred response length: medium.",
              },
            ].forEach(function (s) {
              var sEl = mk("div", "mem-snippet");
              sEl.appendChild(mk("div", "snippet-ns", s.ns));
              sEl.appendChild(mk("div", null, s.text));
              snippets.appendChild(sEl);
            });
            body.appendChild(found);
            body.appendChild(snippets);
          },
        },
        {
          type: "knowledge",
          icon: "üìÇ",
          ts: "14:32:07.498",
          label: "Knowledge Retrieval",
          agentTag: "knowledge",
          build: function (body) {
            var lbl = mk("div", "label", "Loading Agent Knowledge");
            var kbFile = mk("div", "kb-file");
            var kbIcon = mk("span", "kb-file-icon", "üìÑ");
            var kbInfo = document.createElement("div");
            kbInfo.appendChild(mk("div", "kb-file-name", "coding-agent.json"));
            kbInfo.appendChild(mk("div", "kb-file-size", "6.2 KB ¬∑ indexed from 481 KB source"));
            kbFile.appendChild(kbIcon);
            kbFile.appendChild(kbInfo);
            var status = mk(
              "div",
              null,
              "Loaded in 12ms ¬∑ 3 capability sections injected into context",
            );
            status.style.fontSize = "10px";
            status.style.color = "var(--text-3)";
            status.style.marginTop = "6px";
            body.appendChild(lbl);
            body.appendChild(kbFile);
            body.appendChild(status);
          },
        },
        {
          type: "tool",
          icon: "üîß",
          ts: "14:32:08.820",
          label: "Tool Execution",
          agentTag: "web",
          build: function (body) {
            var row = mk("div", null, "Executing:");
            row.style.color = "var(--text-2)";
            row.style.fontSize = "11px";
            var toolStatus = mk("div", "tool-status");
            toolStatus.appendChild(mk("span", "tool-badge", "web-search"));
            var statusSpan = mk("span", null, "‚óè Running");
            statusSpan.style.color = "var(--orange)";
            statusSpan.style.fontSize = "10px";
            toolStatus.appendChild(statusSpan);
            var result = mk(
              "div",
              null,
              'Query: "TypeScript delegate pattern design examples" ¬∑ Fetching top 4 results‚Ä¶',
            );
            result.style.fontSize = "10px";
            result.style.color = "var(--text-3)";
            result.style.marginTop = "6px";
            result.style.fontStyle = "italic";
            body.appendChild(row);
            body.appendChild(toolStatus);
            body.appendChild(result);
          },
        },
        {
          type: "synth",
          icon: "‚ú¶",
          ts: "14:32:09.441",
          label: "Response Synthesis",
          agentTag: null,
          build: function (body) {
            var lbl = mk("div", null, "Synthesizing response across ");
            lbl.style.color = "var(--text-2)";
            lbl.style.fontSize = "11px";
            var agents = mk("span", null, "2 agents");
            agents.style.color = "var(--green)";
            agents.style.fontWeight = "600";
            lbl.appendChild(agents);
            lbl.appendChild(document.createTextNode(" ‚Äî Code Analyst + Web Researcher"));
            var synthBar = mk("div", "synth-bar-wrap");
            var synthLbl = mk(
              "div",
              "synth-bar-label",
              "Merging outputs ¬∑ Applying memory context ¬∑ Formatting‚Ä¶",
            );
            var synthTrack = mk("div", "synth-bar-track");
            var synthFill = mk("div", "synth-bar-fill");
            synthTrack.appendChild(synthFill);
            synthBar.appendChild(synthLbl);
            synthBar.appendChild(synthTrack);
            body.appendChild(lbl);
            body.appendChild(synthBar);
          },
        },
      ];

      var TEST_CARDS = [
        {
          type: "intent",
          icon: "üéØ",
          ts: null,
          label: "Intent Analysis",
          agentTag: null,
          build: function (body) {
            var qt = mk(
              "div",
              "query-text",
              '"Show me my memory stats and check if the knowledge base needs a refresh."',
            );
            var kl = mk("div", "label", "Extracted Keywords");
            var pills = mk("div", "pills");
            ["memory stats", "knowledge base", "refresh", "system health"].forEach(function (k) {
              pills.appendChild(mk("span", "pill", k));
            });
            var conf = mkConfBar("System Introspection", 97);
            body.appendChild(qt);
            body.appendChild(kl);
            body.appendChild(pills);
            body.appendChild(conf);
          },
        },
        {
          type: "routing",
          icon: "‚ö°",
          ts: null,
          label: "Agent Routing",
          agentTag: "memory",
          build: function (body) {
            var row = document.createElement("div");
            row.style.display = "flex";
            row.style.alignItems = "center";
            row.style.gap = "4px";
            var lbl = mk("span", null, "Routing to");
            lbl.style.color = "var(--text-2)";
            var arrow = mk("span", null, "‚Üí");
            arrow.style.color = "var(--orange)";
            arrow.style.margin = "0 4px";
            row.appendChild(lbl);
            row.appendChild(arrow);
            row.appendChild(mk("span", "routing-target", "Memory Manager"));
            var reason = mk(
              "div",
              "routing-reason",
              "Domain: internal system query. No tool execution required. Direct memory introspection path.",
            );
            body.appendChild(row);
            body.appendChild(reason);
          },
        },
        {
          type: "synth",
          icon: "‚ú¶",
          ts: null,
          label: "Response Synthesis",
          agentTag: null,
          build: function (body) {
            var lbl = mk(
              "div",
              null,
              "Pulling live stats from Memory Manager ¬∑ Formatting dashboard summary",
            );
            lbl.style.color = "var(--text-2)";
            lbl.style.fontSize = "11px";
            var synthBar = mk("div", "synth-bar-wrap");
            synthBar.appendChild(mk("div", "synth-bar-label", "Compiling vitals snapshot‚Ä¶"));
            var t = mk("div", "synth-bar-track");
            var f = mk("div", "synth-bar-fill");
            t.appendChild(f);
            synthBar.appendChild(t);
            body.appendChild(lbl);
            body.appendChild(synthBar);
          },
        },
      ];

      /* ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ */
      function mk(tag, cls, text) {
        var el = document.createElement(tag);
        if (cls) el.className = cls;
        if (text !== undefined) el.textContent = text;
        return el;
      }

      function mkConfBar(label, pct) {
        var wrap = mk("div", "conf-bar-wrap");
        var lbl = mk("div", "conf-bar-label");
        lbl.appendChild(mk("span", null, label));
        lbl.appendChild(mk("span", null, pct + "% confidence"));
        var track = mk("div", "conf-bar-track");
        var fill = mk("div", "conf-bar-fill");
        fill.style.width = pct + "%";
        track.appendChild(fill);
        wrap.appendChild(lbl);
        wrap.appendChild(track);
        return wrap;
      }

      function nowTs() {
        var d = new Date();
        return (
          d.getHours() +
          ":" +
          pad(d.getMinutes()) +
          ":" +
          pad(d.getSeconds()) +
          "." +
          String(d.getMilliseconds()).padStart(3, "0")
        );
      }
      function pad(n) {
        return String(n).padStart(2, "0");
      }

      function buildCard(def, delay, append) {
        var card = mk("div", "stream-card card-" + def.type);
        card.dataset.agentTag = def.agentTag || "";
        card.style.animationDelay = delay + "ms";

        var header = mk("div", "card-header");
        header.appendChild(mk("span", "card-icon", def.icon));
        var tag = mk("span", "card-type-tag tag-" + def.type, def.label);
        header.appendChild(tag);
        var ts = mk("span", "card-ts", def.ts || nowTs());
        header.appendChild(ts);
        card.appendChild(header);

        var body = mk("div", "card-body");
        def.build(body);
        card.appendChild(body);
        return card;
      }

      /* ‚îÄ‚îÄ Render stream ‚îÄ‚îÄ */
      var stream = document.getElementById("stream-wrap");
      var selectedAgent = null;

      function clearStream() {
        while (stream.firstChild) {
          stream.removeChild(stream.firstChild);
        }
      }

      function renderCards(defs, baseDelay, appendMode) {
        if (!appendMode) clearStream();
        defs.forEach(function (def, i) {
          var card = buildCard(def, baseDelay + i * 200);
          stream.appendChild(card);
        });
        if (selectedAgent) applyFilter(selectedAgent);
      }

      function applyFilter(tag) {
        var cards = stream.querySelectorAll(".stream-card");
        cards.forEach(function (c) {
          var ct = c.dataset.agentTag;
          if (!tag || ct === tag || ct === "") {
            c.classList.remove("dimmed");
            c.classList.add("highlighted");
          } else {
            c.classList.add("dimmed");
            c.classList.remove("highlighted");
          }
        });
      }

      /* ‚îÄ‚îÄ Build agents ‚îÄ‚îÄ */
      var agentList = document.getElementById("agent-list");
      AGENTS.forEach(function (a) {
        var item = mk("div", "agent-item");
        if (a.status === "running" || a.status === "active-run") item.classList.add("active-agent");
        item.appendChild(mk("span", "agent-icon", a.icon));
        var info = mk("div", "agent-info");
        info.appendChild(mk("div", "agent-name", a.name));
        info.appendChild(mk("div", "agent-meta", a.meta));
        item.appendChild(info);
        var dot = mk("span", "status-dot " + a.status);
        item.appendChild(dot);
        item.addEventListener("click", function () {
          if (selectedAgent === a.tag) {
            selectedAgent = null;
            item.classList.remove("selected");
            agentList.querySelectorAll(".agent-item").forEach(function (el) {
              el.classList.remove("dimmed");
            });
            var cards = stream.querySelectorAll(".stream-card");
            cards.forEach(function (c) {
              c.classList.remove("dimmed", "highlighted");
            });
          } else {
            selectedAgent = a.tag;
            agentList.querySelectorAll(".agent-item").forEach(function (el) {
              if (el !== item) {
                el.classList.add("dimmed");
                el.classList.remove("selected");
              }
            });
            item.classList.add("selected");
            item.classList.remove("dimmed");
            applyFilter(a.tag);
          }
        });
        agentList.appendChild(item);
      });

      /* ‚îÄ‚îÄ Sparkline ‚îÄ‚îÄ */
      var sparkline = document.getElementById("sparkline");
      var sparkHeights = [30, 55, 40, 70, 45, 85, 60, 90, 75, 100];
      sparkHeights.forEach(function (h) {
        var bar = mk("div", "spark-bar");
        bar.style.height = h + "%";
        sparkline.appendChild(bar);
      });

      /* ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ */
      document.getElementById("btn-replay").addEventListener("click", function () {
        selectedAgent = null;
        agentList.querySelectorAll(".agent-item").forEach(function (el) {
          el.classList.remove("dimmed", "selected");
        });
        renderCards(BASE_CARDS, 0, false);
      });

      document.getElementById("btn-trigger").addEventListener("click", function () {
        renderCards(TEST_CARDS, 0, true);
        setTimeout(function () {
          stream.scrollTop = stream.scrollHeight;
        }, 100);
      });

      /* ‚îÄ‚îÄ Init ‚îÄ‚îÄ */
      renderCards(BASE_CARDS, 200, false);
    </script>
  </body>
</html>
